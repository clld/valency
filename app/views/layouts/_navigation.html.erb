<!-- navigation partial -->
<!-- this is rendered in the top navbar -->
<div class="navbar-inner">
  <div class="container">

    <%= link_to "ValPaL", root_path, :class => 'brand' %>

    <ul class="nav">

      <!-- Languages dropdown -->
      <li class="dropdown" id="language_dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
          Language contributions <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><%= link_to "All languages", languages_path %></li>
          <li class="divider"></li>
          <%= li_wrapped_links_to_all_languages(same_controller = true) %>
        </ul>
      </li>
      <li class="divider-vertical"></li>

      <!-- Meanings dropdown -->
      <li class="dropdown" id="meaning_dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
          Verb meanings <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <div class="caption">
            <%= link_to "Show all Verb meanings", meanings_path, class: "inline" %>,
            or select one of the <%= @meanings_core.size %> core meanings:
          </div>
          <li class="divider"></li>
          <% @meanings_core.each do |m| %>
          <% cls = 'active' if m == @meaning %>
            <li class="<%= cls %>"><%= link_to m, m %></li>
          <% end %>
        </ul>
      </li>
      <li class="divider-vertical"></li>

    </ul><!-- end .nav -->
  </div><!-- end .navbar-inner -->
</div><!-- end .container -->


<div class="navbar-inner no-gradient"><!-- second nav bar -->
	<div class="container" id="submenu">

		<!-- language name or "Choose a Language" link -->
		<ul class="nav">
			<li id="nav_language" class="<%= 'active' if controller_name == 'languages' && @language %>">
			<% if @language %>
				<%= link_to_unless_current @language.to_s, @language, title: "Overview for #{@language.to_s}" do %>
					<%= content_tag :a, @language.to_s %>
				<% end %>
			<% else %>
				<%# no language selected %>
				<a id="choose_lang">(choose a language)</a>
			<% end %>
		</li>

		<li class="divider-vertical"></li>	

		<% unless @language # no language selected %>
		  <li id="verb_dropdown" class="disabled">
			  <a>Verb forms</a>
			</li>
		<% else # a language is selected %>
		
		<!-- Verb forms dropdown (w/ meanings) -->			  
		<li class="dropdown<%= ' active' if controller_name == 'verbs' %>" id="verb_dropdown">
	    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
				Verb forms <b class="caret"></b>
      </a>
	    <ul class="dropdown-menu hover-items">
        <div class="caption">
					<%= link_to "Show all #{@language.verbs.size} Verb forms", language_verbs_path(@language), class: "inline" %>,
          or choose by Verb meaning (80 core meanings shown):
        </div>
        <li class="divider"></li>

	      <% @meanings_core.includes(:verbs).each do |m| %>
					<% verbs = (m.verbs & @language.verbs) %>
          <li class="<%= 'active' if m == @meaning %>">
						<% if verbs.size > 0 %>
							<%= link_to(controller: 'verbs', action: 'show', language_id: @language.to_param, id: verbs.first.to_param, meaning: m.to_param) do %>
								<span class="toggle-hover"><%= m.to_s %></span>
								<span class="toggle-hover object-language">
									<%= verbs.map{|v| v.to_s}.join(', ').html_safe %>
								</span>
							<% end %>
							
						<% else # no verbs for this meaning %>

							<%= content_tag :a, class: 'disabled' do %>
								<span class="toggle-hover"><%= m.to_s %></span>
								<span class="toggle-hover">(no counterpart)</span>
							<% end %>

						<% end %>
					</li>
        <% end %>						

	    </ul>
	  </li>
		<% end # unless %>

    <li class="divider-vertical"></li>
    
    <%= submenu_items %w(coding_frames alternations examples), divider='divider-vertical' %>
    
		</ul><!-- end .nav -->

	</div><!-- end .container#submenu -->
</div><!-- end .navbar-inner -->


