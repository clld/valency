<!-- Language details -->
<% enable_gmaps %>
<div class="row">
  <div class="span6">
    
    <h1>
      <%= @language %>
      <% if @iso_code %>
        <a title="Look up ISO code in Glottolog" href="http://www.glottolog.org/glottolog/?iso=<%= @iso_code %>" 
           class="label"><%= @iso_code %></a>
        <a title="Look up in WALS" href="http://wals.info/languoid/by_code/iso_639_3_<%= @iso_code %>">
          <%= image_tag('icons/wals.png', size: '16x16') %>
        </a>
      <% end %>
    </h1>
    
    <table class="table table-condensed table-hover" id="language_metadata">
      <% if @language.variety %>
        <tr>
          <th>Variety</th>
          <td><%= @language.variety %></td>
        </tr>
      <% end %>
      <% if @language.family %>
        <tr>
          <th>Family</th>
          <td><%= @language.family %></td>
        </tr>
      <% end %>
      <% if @language.continent %>
        <tr>
          <th>Region</th>
          <td><%= @language.continent %></td>
        </tr>
      <% end %>
    </table>
    
    <%= gmaps({
      map_options: {
        container_class: "map_container single",
        provider_key: @google_api_key,
        auto_adjust:  true,
        auto_zoom:    false,
        zoom: 5,
        minZoom: 2,
        mapTypeControl: true,
        raw: "{
          streetViewControl: false,
          overviewMapControl: true,
          navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
          }
        }"
      },
      markers: { data: @map_data, options: { randomize: false } }
    }) %>
  </div>

  <div class="span6">
    <h2><%= "Contributor".pluralize @contributors.size %></h2>
    <% if @contributors.size == 0 %>
      (not specified)
    <% else %>
      <%= render partial: 'contributor', collection: @contributors %>
    <% end %>
    
    <% if @native_speakers.size > 0 %>
      <div class="clear" style="margin-top:8px;">
        <b>with data contributions by <%= pluralize @native_speakers.size, "native speaker" %></b>
      </div>
    <% end %>
  </div>
</div>

<div class="row">
  <div class="span12">
    <h2>Data</h2>
    <% readable = {'verbs'=>'Verb forms', 'examples'=>'glossed Examples'} %>
    <% %w(verbs coding_frames alternations examples).each do |resource| %>
      <% name = readable[resource] || resource.humanize %>
        <%= link_to "#{@language.send(resource).count} #{name}", send("language_#{resource}_path", @language), class: 'btn' %>
    <% end %>
  </div>
</div>

<!-- all comments hidden for now -->
